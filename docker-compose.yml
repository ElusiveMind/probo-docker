# Our example docker-compose.yml file for building the probo container. You should replace the
# correlating values with your configuration options with your domains. You also should not
# change any of the volumes settings. Please see the documentation location at
# https://probo-open-source.com
version: '2'
services:
  probo:
    build: 
      context: .
    container_name: OSProboCI-Docker
    volumes:
      - /var/run/docker.sock:/var/run/docker.sock
      - asset-files:/opt/probo/probo-asset-receiver/files
    ports:
      - "80:80"
      - "3012:3012"
      - "3050:3050"
      - "3070:3070"
    environment:
      # Default Probo Configuration Options
      # {PLACEHOLDER}
      # Container Manager Variables
      CM_INSTANCE_NAME: 'OSProboCI'
      ASSETS_URL: 'http://www.example.com:3070'
      BUILD_URL: 'http://{{buildId}}.example.com/'
      ENDPOINT_URL: 'http://www.example.com:3005/probo-api/service-endpoint.json'
      # GitHub Configuration Options
      # {PLACEHOLDER}
      # Bitbucket Handler Variables
      BB_CLIENT_KEY: bbkey
      BB_CLIENT_SECRET: bbsecret
      BB_ACCESS_TOKEN: bbtoken
      BB_REFRESH_TOKEN: bbrefresh
      BB_WEBHOOK_URL: '/bitbucket-webhook'
      # Gitlab Configuration Options
      # {PLACEHOLDER}
      # Asset Receiver Variables
      FILE_STORAGE_PLUGIN: LocalFiles
      FILE_DATA_DIRECTORY: files
      ENCRYPTION_CIPHER: aes-256-cbc
      ENCRYPTION_PASSWORD: password
      RECIPHERED_OUTPUT_DIR: null
      TOKENS: null
      UPLOADS_PAUSED: 'false'
      #FILE_STORAGE_PLUGIN: AwsS3Storage
      #AWS_ACCESS_KEY_ID: 
      #AWS_SECRET_ACCESS_KEY:
      #AWS_BUCKET: itcon
      # Loom Configuration Options
      # {PLACEHOLDER}
      # Reaper Configuration Options
      # {PLACEHOLDER}
    restart: always

